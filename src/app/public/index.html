<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Stamp</title>
    <link href="assets/css/font.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
  </head>

  <body>
    <div class="app">
        <div class="page-background">
            <div class="page-background__overlay"></div>
        </div>

        <div id="menu" class="page-menu page-menu--hidden">
          <div class="page-menu__container">
            <img id="menu-close" class="menu-icon page-menu__close" src="assets/images/icon-menu.svg" onclick="closeMenu()"/>
            <ul class="nav menunav"> 
              <li class="nav__navitem">
                <a href="#" title="About" alt="About">About</a>
              </li>
              <li class="nav__navitem">
                <a href="#" title="Integratons" alt="Integratons">Integrations</a>
              </li>
              <li class="nav__navitem">
                <a href="#" title="Pricing" alt="Pricing">Pricing</a>
              </li>
              <li class="nav__navitem">
                <a href="#" title="Contacts" alt="Contacts">Contacts</a>
              </li>
            </ul>
          </div>
        </div>
        
        <header class="page-header"> 
        
        
          <a href="#" title="Home" alt="Home"><img class="logo" src="assets/images/logo.svg" alt="Logo"/></a>

        <ul class="nav topnav"> 
          <li class="nav__navitem">
            <a href="#" title="About" alt="About">About</a>
          </li>
          <li class="nav__navitem">
            <a href="#" title="Integrations" alt="Integrations">Integrations</a>
          </li>
          <li class="nav__navitem">
            <a href="#" title="Pricing" alt="Pricing">Pricing</a>
          </li>
          <li class="nav__navitem">
            <a href="#" title="Contacts" alt="Contacts">Contacts</a>
          </li>
        </ul>
      
        <img id="menu-open" class="menu-icon" src="assets/images/icon-menu.svg"  onclick="openMenu()"/>

        </header>
    
      <main class="page-main">
      
        <div class="hero">
          <h1>Simple Way to Organize Your Inspirations</h1>
          <h2>I think what motivates people is not great hate, but great love for other people.</h2>
        </div>

        <form class="form" autocomplete="off">
          <header><span>SIGN UP FOR FREE</span></header>
          <main>
            <div class="form__inputs">
              <input autocomplete="off" id="form__name" class="form__textbox" placeholder="Name" />
              <input autocomplete="off"  id="form__email" class="form__textbox" placeholder="E-mail"/>
              <div class="form__password-container">
                <input autocomplete="off" id="form__password" class="form__textbox form__password form__password--secure" placeholder="Password" js-data--secure="true">
                <a title="Show password" alt="Show password">
                  <img onclick="togglePassword()" id="form__password-icon" class="form__textbox form__password-icon" src="assets/images/icon-hidden.svg" alt="Show password" />
                </a>
              </div>
            </div>
            <button title="Sign up" alt="Sign up" type="button" class="form__submit" onclick="submitForm()">
              <span>Sign Up <span>
              <img class="form__submit-icon" src="assets/images/icon-carret.svg" alt="Submit"></img>
            </button>
          </main>
          <footer>
              <div id="form__messages" class="form__messages form__messages--hidden">
              </div>
              <div class="form__terms-copy"><span>By clicking "Sign up" I agree to our</span></div>
              <div class="form__terms-link"><a href="#" title="Terms of service" alt="Terms of service">Terms of Service</a></div>
          </footer>
        </form>
      </main>

      <footer class="page-footer">
        <div class="copyright"> 
            <span>Â© 2016 Stamp. All Rights Reserved</span>
        </div>
        <ul class="nav bottomnav">
          <li class="nav__navitem">
            <a href="#" title="Contact" alt="Contact">CONTACT</a>
          </li>
          <li class="nav__navitem">
            <a href="#" title="Help" alt="Help">HELP</a>
          </li>
          <li class="nav__navitem">
            <a href="#" title="Terms of use" alt="Terms of use">TERMS OF USE</a>
          </li>
          <li class="nav__navitem">
            <a href="#" title="Privacy policy" alt="Privacy policy">PRIVACY POLICY</a>
          </li>
        </ul>
      </footer>

    </div>

    <script>
    
// Show the menu (remove the class that overwrites display attribute to none)
function openMenu() {
  const menu = document.getElementById('menu')
  menu.classList.remove('page-menu--hidden')
}

// Hide the menu (add the class that overwrites display attribute to none)
function closeMenu() {
  const menu = document.getElementById('menu')
  menu.classList.add('page-menu--hidden')
}

// Toggle hiding of password input characters (add/remove class that overwrites -webkit-text-security css attribute to disc, store whether hidden or not as js-data--secure element attribute)
function togglePassword() {
  const password = document.getElementById('form__password')
  const isTextHidden = password.getAttribute('js-data--secure')
  const passwordIcon = document.getElementById('form__password-icon')
  console.log(isTextHidden)
  if (isTextHidden == 'true') {
    console.log('password text is hidden, unhiding...');
    password.classList.remove('form__password--secure')
    password.setAttribute('js-data--secure', 'false')
    passwordIcon.setAttribute('title', 'Hide password')
  } else {
    console.log('password text is not hidden, hiding...');
    password.classList.add('form__password--secure')
    password.setAttribute('js-data--secure', 'true')
    passwordIcon.setAttribute('title', 'Show password')
  }

}

// Perform validation and submit the form if all fields pass.
function submitForm() {
  console.log('Validating inputs...')
  const nameInput = document.getElementById("form__name")
  const nameValue = nameInput.value
  const nameExpression = /^[a-zA-Z0-9]{2,}$/
  const nameValidator = nameExpression.test(nameValue)
  const nameFailureMessage =  'Name field must be be at least 2 characters long, and may only contain alphanumeric characters'
  console.log(nameValidator ? 'Name field is valid.' : nameFailureMessage)
  if (!nameValidator) {
    nameInput.classList.add('form__textbox--error')
  } else {
    nameInput.classList.remove('form__textbox--error')
  }
 
  const emailInput = document.getElementById("form__email")
  const emailValue = emailInput.value
  const emailExpression = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/
  const emailValidator = emailExpression.test(emailValue)
  const emailFailureMessage =  'Email field must be of form user@domain.tld'
  console.log(emailValidator ? 'Email field is valid.' : emailFailureMessage)
  if (!emailValidator) {
    emailInput.classList.add('form__textbox--error')
  } else {
    emailInput.classList.remove('form__textbox--error')
  }


  const passwordInput = document.getElementById("form__password")
  const passwordValue = passwordInput.value
  const passwordExpression = /^.{6,}$/
  const passwordValidator = passwordExpression.test(passwordValue)
  const passwordFailureMessage = 'Password field must be at least 6 characters long'
  console.log(passwordValidator ? 'Password field is valid.' : passwordFailureMessage)
  const passwordIcon = document.getElementById("form__password-icon")
  if (!passwordValidator) {
    passwordInput.classList.add('form__textbox--error')
    passwordIcon.classList.add('form__textbox--error')
  } else {
    passwordInput.classList.remove('form__textbox--error')
    passwordIcon.classList.remove('form__textbox--error')
  }

  const errMsg = document.getElementById('form__messages')
  var child = errMsg.lastElementChild;  
        while (child) { 
            errMsg.removeChild(child); 
            child = errMsg.lastElementChild; 
        } 
  


  // If any of the validations failed, alert the user. Otherwise, send the form.
  if (!(nameValidator && emailValidator && passwordValidator)) {
    errMsg.classList.remove('form__messages--hidden')

    if (!nameValidator) {
      const nameMsg = document.createElement('div')
      nameMsg.textContent = nameFailureMessage
      errMsg.appendChild(nameMsg)
    }

    if (!emailValidator) {
      const emailMsg = document.createElement('div')
      emailMsg.textContent = emailFailureMessage
      errMsg.appendChild(emailMsg)
    }

    if (!passwordValidator) {
      const passwordMsg = document.createElement('div')
      passwordMsg.textContent = passwordFailureMessage
      errMsg.appendChild(passwordMsg)
    }
  } else {
    errMsg.classList.add('form__messages--hidden')

    // Send validated form data here.
  }
}

    </script>
  </body>
</html>
